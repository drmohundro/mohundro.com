
title: "Another year, another devLink (part 3)"
author: David
date: 2009/08/25

<p>So, it didn’t occur to me until today that I was creating a trilogy here. </p> <p>If I had thought about it ahead of time, I would’ve given my titles more creative names like <a href="http://www.mohundro.com/blog/2009/08/24/AnotherYearAnotherDevLinkPart1.aspx">“devLink”</a>, <a href="http://www.mohundro.com/blog/2009/08/25/AnotherYearAnotherDevLinkPart2.aspx">“devLink Strikes Back”</a> and “the Return of devLink.” The true test will be to see if the second post is everyone’s favorite.</p> <p><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="Obligatory Ewoks for the 3rd movie... errr post." border="0" alt="Obligatory Ewoks for the 3rd movie... errr post." src="http://www.mohundro.com/blog/content/binary/WindowsLiveWriter/AnotheryearanotherdevLinkpart3_BC80/image_3.png" width="99" height="146"> </p> <p>Oh well. Maybe next year.</p> <h4>Managed Rootkits</h4> <p>The first session I went to on Saturday was an Open Spaces session on Managed Rootkits convened by <a href="http://www.sempf.net/">Bill Sempf</a>.</p> <p>Before I continue, read that sentence again. Didn’t see it yet? Here’s a hint: <em>Managed</em> Rootkits. You know, managed… as in managed langauges… like .NET. Get your attention yet? It did mine, which is why I showed up! Of course, I expected to be completely lost because, in my mind, <a href="http://en.wikipedia.org/wiki/Rootkit">rootkits</a> are hard stuff that take a <a href="http://blogs.technet.com/markrussinovich/archive/2005/10/31/sony-rootkits-and-digital-rights-management-gone-too-far.aspx">computer genius to find and fix</a>. Surprisingly though, the concept behind managed rootkits is easy.</p> <p>But first, some background. <a href="http://www.sempf.net/post/Defcon-Recap.aspx">Bill had attended Defcon</a> which is where he had originally heard about managed rootkits in the first place (note that his post <a href="http://www.applicationsecurity.co.il/english/NETFrameworkRootkits/tabid/161/Default.aspx">links to a page that includes a demonstration</a>). That’s how the entire session came to be.</p> <p>So, wanna know how to hack the framework?</p> <p>First, take mscorlib. (that’s the primary .NET assembly by the way)</p> <p>Next, take <a href="http://msdn.microsoft.com/en-us/library/f7dy01k1%28VS.80%29.aspx">ildasm</a>. (that’s the MSIL Disassembler – the built-in <a href="http://www.red-gate.com/products/reflector/">Reflector</a> if you will)</p> <p>Disassemble mscorlib into IL.</p> <p>Write your own IL and paste it in the IL you got from disassembling mscorlib.</p> <p>Find <a href="http://msdn.microsoft.com/en-us/library/496e4ekx%28VS.80%29.aspx">ilasm</a> on your machine. (you guessed it, that’s the .NET Assembler)</p> <p>Assemble your modified IL into a new mscorlib.</p> <p>Drop it in the GAC.</p> <p>You L33T hacker you.</p> <p>The entire reason this works is because, once an assembly has been installed into the GAC, the framework doesn’t run additional checks to verify that the assembly matches the hash in its strong name. So yeah, strong naming doesn’t protect assemblies.</p> <p>Once we were all up to speed on the logistics, we discussed if this was, in fact, a <a href="http://en.wikipedia.org/wiki/Zero_day_attack">zero day exploit</a>. It’s not. Why? Because you still have to have administrative privileges to modify any files in the GAC. As Raymond Chen points out, <a href="http://blogs.msdn.com/oldnewthing/archive/2009/01/21/9353310.aspx">“if you have full trust, then you can do anything.”</a></p> <p>Anyway, it was a <em>very</em> interesting conversation. I made the point that, even if it isn’t a security vulnerability, there is the whole user perception issue. For example, if an assembly that your application uses is modified so that it posts your credit card information out on the internet, network trace tools are going to show that it is <em>your</em> application that is connecting to the internet. If your computer were already infiltrated to the point that someone could modify mscorlib on your machine, though, managed rootkits likely aren’t your biggest concern. Oh well, it sounded like a good argument at the time.</p> <h4>Domain Driven Design</h4> <p>The next session I attended was on <a href="http://domaindrivendesign.org/">Domain Driven Design</a> with <a href="http://www.craigberntson.com/blog">Craig Berntson</a>. Here’s <a href="http://www.craigberntson.com/blog/2009/03/speaking-at-devlink.asp">the synopsis from his blog</a>:</p> <blockquote>Domain Driven Design is a way to design and develop enterprise applications so that they are easier to maintain, enhance, and extend. DDD is overkill for many of the applications we develop today, but still has principles that can be applied to most of the apps we write. In this session, you will learn to apply these concepts.</blockquote> <p>My personal feelings regarding this talk was that he did an excellent job at actually communicating DDD. He contrasted the typical data-driven design for applications to driving the design of the system from the business domain. He also did a good job of explaining it in terms that everyone could understand. It was a very good talk.</p> <h4>Lunch over Open Spaces</h4> <p>Over lunch, I went back to the Open Spaces area to see if there were any sessions going on then. A group of people were all sitting in one area so I assumed it was going to be a great conversation. It certainly was, but it wasn’t a planned session. It wasn’t even technical in nature at times… I remember discussing favorite Family Guy episodes at one point…</p> <h4>Architecting Architectural Stuff</h4> <p>My last session was on Architecting Modern Distributed Applications with <a href="http://www.notsotrivial.net/blog/">Clint Edmonson</a>. He has <a href="http://www.notsotrivial.net/blog/post/2009/08/17/DevLink-Decompression.aspx">posted his slides and thoughts on the conference on his blog</a>. He shared a diagram that he had seen at an internal Microsoft presentation that showed the various architectural layers in typical applications and showed how you could use the diagram to help make decisions like self-hosting versus hosted solutions versus moving entirely to the cloud. A comment he made in passing but that I thought had a lot of merit was adding in a ping operation to all of your services so that you can quickly and easily determine the state of what is working and what isn’t. I know hardware almost always has this, but I hadn’t really considered putting it in software. I know, you’ve probably been doing it for years.</p> <h4>Closing Circle</h4> <p>At the end of the day, I went to the Open Spaces closing circle where we went over the week, discussed how we could more effectively publicize Open Spaces to the rest of the conference attendees, and other things related to the conference. I was a jerk and had to leave early, but it was all positive while I was in the room. I’m pretty sure it didn’t erupt or anything after I left :-)</p> <p>Once again, kudos to <a href="http://www.johnkellar.com/">John Kellar</a> and team for planning another amazing devLink. If you’re interested in seeing more and better pictures than I’ll ever be able to take, <a href="http://www.davidgiard.com/">David Giard</a> has <a href="http://www.davidgiard.com/2009/08/23/DevLinkAndLinkWray.aspx">posted a link to his pictures on his blog</a>. If you weren’t able to attend this year, go next year.</p>
